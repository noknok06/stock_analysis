<!-- templates/base.html (æ”¹è‰¯ç‰ˆ) -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}æ ªå¼åˆ†æè¨˜éŒ²ã‚¢ãƒ—ãƒª{% endblock %}</title>
    
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ CSSï¼ˆBEMè¦ç´„æº–æ‹ ãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é‡è¦–ï¼‰ -->
    <style>
        /* ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆBEMæº–æ‹ ï¼‰ */
        .app-card {
            @apply rounded-lg border bg-white shadow-sm transition-shadow duration-200;
        }
        .app-card:hover {
            @apply shadow-md;
        }
        .app-card__header {
            @apply flex flex-col space-y-1.5 p-4 md:p-6;
        }
        .app-card__title {
            @apply text-lg md:text-xl font-semibold leading-none tracking-tight;
        }
        .app-card__content {
            @apply p-4 md:p-6 pt-0;
        }
        
        /* ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
        .app-btn {
            @apply inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-manipulation;
        }
        .app-btn--primary {
            @apply app-btn bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 h-9 md:h-10 px-3 md:px-4 py-2;
        }
        .app-btn--secondary {
            @apply app-btn border border-gray-300 bg-white hover:bg-gray-50 active:bg-gray-100 h-9 md:h-10 px-3 md:px-4 py-2;
        }
        .app-btn--ghost {
            @apply app-btn hover:bg-gray-100 active:bg-gray-200 h-9 md:h-10 px-3 md:px-4 py-2;
        }
        .app-btn--sm {
            @apply h-8 rounded-md px-2 md:px-3 text-xs md:text-sm;
        }
        .app-btn--lg {
            @apply h-12 md:h-14 px-6 md:px-8 text-base md:text-lg;
        }
        
        /* ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
        .app-input {
            @apply flex h-10 md:h-12 w-full rounded-md border border-gray-300 bg-white px-3 md:px-4 py-2 text-sm md:text-base placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200;
        }
        .app-textarea {
            @apply flex min-h-[120px] md:min-h-[150px] w-full rounded-md border border-gray-300 bg-white px-3 md:px-4 py-2 text-sm md:text-base placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-vertical text-left;
        }
        .app-select {
            @apply flex h-10 md:h-12 w-full rounded-md border border-gray-300 bg-white px-3 md:px-4 py-2 text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200;
        }
        /* ãƒ†ã‚­ã‚¹ãƒˆã®å·¦å¯„ã›ã‚’å¼·åˆ¶ */
        .entry-card__content, .risk-factors, .investment-goal {
            text-align: left !important;
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã®å¹…ç¢ºä¿ */
        .form-field .app-input, 
        .form-field .app-textarea, 
        .form-field .app-select {
            width: 100% !important;
            max-width: 100% !important;
        }

        /* ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®å¹…èª¿æ•´ */
        .editor-container {
            width: 100% !important;
        }

        .editor-container textarea {
            width: 100% !important;
            min-width: 100% !important;
        }        
        /* ãƒãƒƒã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
        .app-badge {
            @apply inline-flex items-center rounded-full px-2 md:px-2.5 py-0.5 md:py-1 text-xs md:text-sm font-semibold transition-colors;
        }
        .app-badge--primary {
            @apply app-badge bg-blue-600 text-white;
        }
        .app-badge--secondary {
            @apply app-badge bg-gray-100 text-gray-900;
        }
        .app-badge--outline {
            @apply app-badge border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 cursor-pointer;
        }
        
        /* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .mobile-menu {
            @apply fixed inset-0 z-50 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity duration-300;
        }
        .mobile-menu__panel {
            @apply fixed right-0 top-0 h-auto max-h-screen w-80 max-w-[90vw] bg-white shadow-xl transform transition-transform duration-300 ease-out overflow-y-auto;
        }

        /* PCç‰ˆã§ã¯å¹…ã‚’èª¿æ•´ */
        @media (min-width: 768px) {
            .mobile-menu__panel {
                @apply w-96 h-auto max-h-[80vh] top-4 right-4 rounded-lg;
            }
            .mobile-menu {
                @apply bg-transparent;
            }
        }
        .mobile-menu--hidden {
            @apply opacity-0 pointer-events-none;
        }
        .mobile-menu--hidden .mobile-menu__panel {
            @apply translate-x-full;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–èª¿æ•´ */
        @media (max-width: 640px) {
            .touch-friendly {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
        @media (prefers-color-scheme: dark) {
            .app-card {
                @apply bg-gray-800 border-gray-700 text-white;
            }
        }
    </style>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="min-h-screen bg-gray-50 antialiased">
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <nav class="app-navigation bg-white border-b border-gray-200 sticky top-0 z-40" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-14 md:h-16">
                <!-- ãƒ­ã‚´ãƒ»ãƒ›ãƒ¼ãƒ ãƒªãƒ³ã‚¯ -->
                <div class="app-navigation__brand flex items-center">
                    <a href="{% url 'dashboard' %}" class="text-xl md:text-2xl font-bold text-gray-900 flex items-center gap-2 touch-friendly">
                        <span role="img" aria-label="ãƒãƒ£ãƒ¼ãƒˆã‚¢ã‚¤ã‚³ãƒ³">ğŸ“Š</span>
                        <span class="hidden xs:inline">æ ªå¼åˆ†æè¨˜éŒ²</span>
                        <span class="xs:hidden">æ ªå¼åˆ†æ</span>
                    </a>
                </div>
                
                <!-- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="app-navigation__desktop hidden md:flex items-center space-x-4">
                    {% if user.is_authenticated %}
                        <a href="{% url 'notebook_list' %}" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-current="{% if request.resolver_match.url_name == 'notebook_list' %}page{% endif %}">
                            ãƒãƒ¼ãƒˆä¸€è¦§
                        </a>
                        <a href="{% url 'calculator' %}" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-current="{% if request.resolver_match.url_name == 'calculator' %}page{% endif %}">
                            è¨ˆç®—ãƒ„ãƒ¼ãƒ«
                        </a>
                        <a href="{% url 'notebook_create' %}" class="app-btn app-btn--primary">
                            <i data-lucide="plus" class="w-4 h-4" aria-hidden="true"></i>
                            <span class="hidden sm:inline">æ–°è¦ãƒãƒ¼ãƒˆ</span>
                            <span class="sm:hidden">æ–°è¦</span>
                        </a>
                        <div class="app-navigation__user flex items-center gap-2">
                            <span class="text-sm text-gray-600 hidden lg:inline">{{ user.username }}</span>
                            <a href="{% url 'logout' %}" class="text-gray-400 hover:text-gray-600 p-1" aria-label="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ">
                                <i data-lucide="log-out" class="w-5 h-5" aria-hidden="true"></i>
                            </a>
                        </div>
                    {% else %}
                        <a href="{% url 'login' %}" class="app-btn app-btn--secondary">ãƒ­ã‚°ã‚¤ãƒ³</a>
                        <a href="{% url 'register' %}" class="app-btn app-btn--primary">æ–°è¦ç™»éŒ²</a>
                    {% endif %}
                </div>
                
                <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ -->
                <div class="app-navigation__mobile md:hidden">
                    <button type="button" 
                            class="app-btn app-btn--ghost p-2 touch-friendly" 
                            aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"
                            aria-expanded="false"
                            aria-controls="mobile-menu"
                            onclick="toggleMobileMenu()">
                        <i data-lucide="menu" class="w-6 h-6" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div id="mobile-menu" class="mobile-menu mobile-menu--hidden" aria-hidden="true">
        <div class="mobile-menu__panel">
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
                    <button type="button" 
                            class="app-btn app-btn--ghost p-2 touch-friendly" 
                            aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"
                            onclick="toggleMobileMenu()">
                        <i data-lucide="x" class="w-6 h-6" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
            
            <nav class="p-4" role="navigation" aria-label="ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
                {% if user.is_authenticated %}
                    <div class="space-y-2">
                        <a href="{% url 'dashboard' %}" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-md transition-colors">
                            <i data-lucide="home" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                        </a>
                        <a href="{% url 'notebook_list' %}" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-md transition-colors">
                            <i data-lucide="book-open" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            ãƒãƒ¼ãƒˆä¸€è¦§
                        </a>
                        <a href="{% url 'calculator' %}" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-md transition-colors">
                            <i data-lucide="calculator" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            è¨ˆç®—ãƒ„ãƒ¼ãƒ«
                        </a>
                        <a href="{% url 'notebook_create' %}" class="block px-4 py-3 bg-blue-600 text-white hover:bg-blue-700 rounded-md transition-colors">
                            <i data-lucide="plus" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            æ–°è¦ãƒãƒ¼ãƒˆä½œæˆ
                        </a>
                    </div>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <div class="px-4 py-2 text-sm text-gray-600">
                            ãƒ­ã‚°ã‚¤ãƒ³ä¸­: {{ user.username }}
                        </div>
                        <a href="{% url 'logout' %}" class="block px-4 py-3 text-red-600 hover:bg-red-50 rounded-md transition-colors">
                            <i data-lucide="log-out" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                        </a>
                    </div>
                {% else %}
                    <div class="space-y-2">
                        <a href="{% url 'login' %}" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-md transition-colors">
                            <i data-lucide="log-in" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            ãƒ­ã‚°ã‚¤ãƒ³
                        </a>
                        <a href="{% url 'register' %}" class="block px-4 py-3 bg-blue-600 text-white hover:bg-blue-700 rounded-md transition-colors">
                            <i data-lucide="user-plus" class="w-5 h-5 inline mr-3" aria-hidden="true"></i>
                            æ–°è¦ç™»éŒ²
                        </a>
                    </div>
                {% endif %}
            </nav>
        </div>
    </div>

    <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰ -->
    {% if messages %}
        <div class="app-messages max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4" role="alert" aria-live="polite">
            {% for message in messages %}
                <div class="app-message app-message--{{ message.tags }} rounded-lg p-4 mb-4 flex items-start gap-3
                    {% if message.tags == 'success' %}bg-green-50 border border-green-200 text-green-800
                    {% elif message.tags == 'error' %}bg-red-50 border border-red-200 text-red-800
                    {% elif message.tags == 'warning' %}bg-yellow-50 border border-yellow-200 text-yellow-800
                    {% else %}bg-blue-50 border border-blue-200 text-blue-800{% endif %}">
                    
                    <i data-lucide="{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}alert-circle{% elif message.tags == 'warning' %}alert-triangle{% else %}info{% endif %}" 
                       class="w-5 h-5 mt-0.5 flex-shrink-0" aria-hidden="true"></i>
                    
                    <div class="flex-1">{{ message }}</div>
                    
                    <button type="button" 
                            class="flex-shrink-0 p-1 hover:bg-black hover:bg-opacity-10 rounded transition-colors" 
                            aria-label="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é–‰ã˜ã‚‹"
                            onclick="this.parentElement.style.display='none'">
                        <i data-lucide="x" class="w-4 h-4" aria-hidden="true"></i>
                    </button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main role="main" class="app-main">
        {% block content %}{% endblock %}
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="app-footer bg-white border-t border-gray-200 mt-12" role="contentinfo">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center text-sm text-gray-600">
                <p>&copy; 2024 æ ªå¼åˆ†æè¨˜éŒ²ã‚¢ãƒ—ãƒª. All rights reserved.</p>
                <p class="mt-2">
                    <a href="#" class="hover:text-gray-900 transition-colors">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                    <span class="mx-2">|</span>
                    <a href="#" class="hover:text-gray-900 transition-colors">åˆ©ç”¨è¦ç´„</a>
                    <span class="mx-2">|</span>
                    <a href="#" class="hover:text-gray-900 transition-colors">ãŠå•ã„åˆã‚ã›</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Lucide icons ã®åˆæœŸåŒ–
        lucide.createIcons();
        
        // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®åˆ¶å¾¡
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const button = document.querySelector('[aria-controls="mobile-menu"]');
            const isHidden = menu.classList.contains('mobile-menu--hidden');
            
            if (isHidden) {
                menu.classList.remove('mobile-menu--hidden');
                menu.setAttribute('aria-hidden', 'false');
                button.setAttribute('aria-expanded', 'true');
                button.setAttribute('aria-label', 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹');
                // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—
                trapFocus(menu);
                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢
                document.body.style.overflow = 'hidden';
            } else {
                menu.classList.add('mobile-menu--hidden');
                menu.setAttribute('aria-hidden', 'true');
                button.setAttribute('aria-expanded', 'false');
                button.setAttribute('aria-label', 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã');
                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¾©å…ƒ
                document.body.style.overflow = '';
                // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’æˆ»ã™
                button.focus();
            }
        }
        
        // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰
        function trapFocus(element) {
            const focusableElements = element.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];
            
            function handleTabKey(e) {
                if (e.key !== 'Tab') return;
                
                if (e.shiftKey) {
                    if (document.activeElement === firstElement) {
                        lastElement.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastElement) {
                        firstElement.focus();
                        e.preventDefault();
                    }
                }
            }
            
            element.addEventListener('keydown', handleTabKey);
            firstElement.focus();
        }
        
        // ESCã‚­ãƒ¼ã§ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const menu = document.getElementById('mobile-menu');
                if (!menu.classList.contains('mobile-menu--hidden')) {
                    toggleMobileMenu();
                }
            }
        });
        
        // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        document.getElementById('mobile-menu').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleMobileMenu();
            }
        });
        
        // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ¤œç´¢æ©Ÿèƒ½
        function setupInlineSearch() {
            const searchInput = document.getElementById('inline-search');
            const searchResults = document.getElementById('search-results');
            let searchTimeout;

            if (searchInput && searchResults) {
                searchInput.addEventListener('input', function() {
                    clearTimeout(searchTimeout);
                    const query = this.value.trim();
                    
                    if (query.length < 2) {
                        searchResults.classList.add('hidden');
                        return;
                    }
                    
                    searchTimeout = setTimeout(() => {
                        fetch(`/api/search/?q=${encodeURIComponent(query)}`)
                            .then(response => response.json())
                            .then(data => {
                                displaySearchResults(data.results);
                            })
                            .catch(error => {
                                console.error('æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error);
                            });
                    }, 300);
                });
                
                // å¤–éƒ¨ã‚¯ãƒªãƒƒã‚¯ãƒ»ESCã‚­ãƒ¼ã§æ¤œç´¢çµæœã‚’é–‰ã˜ã‚‹
                document.addEventListener('click', function(e) {
                    if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                        searchResults.classList.add('hidden');
                    }
                });
                
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && !searchResults.classList.contains('hidden')) {
                        searchResults.classList.add('hidden');
                        searchInput.focus();
                    }
                });
            }
        }

        function displaySearchResults(results) {
            const searchResults = document.getElementById('search-results');
            
            if (results.length === 0) {
                searchResults.innerHTML = '<div class="p-4 text-center text-gray-500">æ¤œç´¢çµæœãŒã‚ã‚Šã¾ã›ã‚“</div>';
            } else {
                searchResults.innerHTML = results.map(result => `
                    <a href="${result.url}" class="block p-3 hover:bg-gray-50 border-b last:border-b-0 focus:bg-gray-50 focus:outline-none">
                        <div class="font-semibold">${result.title}</div>
                        <div class="text-sm text-gray-600">${result.subtitle}</div>
                        <div class="flex gap-1 mt-1">
                            ${result.tags.slice(0, 3).map(tag => 
                                `<span class="app-badge app-badge--outline text-xs">#${tag}</span>`
                            ).join('')}
                        </div>
                    </a>
                `).join('');
            }
            
            searchResults.classList.remove('hidden');
        }

        // DOMãƒ­ãƒ¼ãƒ‰å¾Œã«å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            setupInlineSearch();
        });
        
        // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼šç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        observer.unobserve(img);
                    }
                });
            });
            
            document.querySelectorAll('img[data-src]').forEach(img => {
                imageObserver.observe(img);
            });
        }
    </script>
</body>
</html>